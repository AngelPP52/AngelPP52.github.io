(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{491:function(s,t,a){s.exports=a.p+"assets/img/semantic_version.113eff80.png"},492:function(s,t,a){s.exports=a.p+"assets/img/minimal_version_select.b7b27494.png"},493:function(s,t,a){s.exports=a.p+"assets/img/chassis_dependency.d2dfe746.png"},494:function(s,t,a){s.exports=a.p+"assets/img/middleware_ratelimiter.b45624e9.png"},495:function(s,t,a){s.exports=a.p+"assets/img/restful_api.ea06b53a.png"},496:function(s,t,a){s.exports=a.p+"assets/img/ba2932c_version.19938d09.png"},497:function(s,t,a){s.exports=a.p+"assets/img/miss_aes.7476c3cb.png"},498:function(s,t,a){s.exports=a.p+"assets/img/1_8_3_exist_aes.62493b4e.png"},499:function(s,t,a){s.exports=a.p+"assets/img/foundation_aes.19563405.png"},500:function(s,t,a){s.exports=a.p+"assets/img/final_dependency.d4b2cd20.png"},550:function(s,t,a){"use strict";a.r(t);var r=a(4),e=Object(r.a)({},(function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[r("h2",{attrs:{id:"写在最前"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#写在最前"}},[s._v("#")]),s._v(" 写在最前")]),s._v(" "),r("p",[s._v("因为网上关于go modules的文章已经非常多了，而且讲得也非常详细，所以本文只会大概介绍一下go modules中比较重要的几个点(如果大家想深入了解go modules，可以参考"),r("a",{attrs:{href:"#%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0"}},[s._v("这里")]),s._v(")，剩下的篇幅会列举在工程开发上使用go modules所遇到的问题，以及我们是如何解决的；最后会总结出一些关于go modules的使用建议。")]),s._v(" "),r("br"),s._v(" "),r("h2",{attrs:{id:"go-modules基本使用"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#go-modules基本使用"}},[s._v("#")]),s._v(" go modules基本使用")]),s._v(" "),r("table",[r("thead",[r("tr",[r("th",{staticStyle:{"text-align":"center"}},[s._v("命令")]),s._v(" "),r("th",{staticStyle:{"text-align":"center"}},[s._v("作用")])])]),s._v(" "),r("tbody",[r("tr",[r("td",{staticStyle:{"text-align":"center"}},[s._v("go mod init")]),s._v(" "),r("td",{staticStyle:{"text-align":"center"}},[s._v("生成 go.mod 文件")])]),s._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"center"}},[s._v("go mod download")]),s._v(" "),r("td",{staticStyle:{"text-align":"center"}},[s._v("下载 go.mod 文件中指明的所有依赖")])]),s._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"center"}},[s._v("go mod tidy")]),s._v(" "),r("td",{staticStyle:{"text-align":"center"}},[s._v("整理现有的依赖")])]),s._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"center"}},[s._v("go mod graph")]),s._v(" "),r("td",{staticStyle:{"text-align":"center"}},[s._v("查看现有的依赖结构")])]),s._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"center"}},[s._v("go mod edit")]),s._v(" "),r("td",{staticStyle:{"text-align":"center"}},[s._v("编辑 go.mod 文件")])]),s._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"center"}},[s._v("go mod vendor")]),s._v(" "),r("td",{staticStyle:{"text-align":"center"}},[s._v("导出项目所有的依赖到vendor目录")])]),s._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"center"}},[s._v("go mod verify")]),s._v(" "),r("td",{staticStyle:{"text-align":"center"}},[s._v("校验一个模块是否被篡改过")])]),s._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"center"}},[s._v("go mod why")]),s._v(" "),r("td",{staticStyle:{"text-align":"center"}},[s._v("查看为什么需要依赖某模块")])])])]),s._v(" "),r("br"),s._v(" "),r("h2",{attrs:{id:"go-modules环境变量"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#go-modules环境变量"}},[s._v("#")]),s._v(" go modules环境变量")]),s._v(" "),r("br"),s._v(" "),r("h3",{attrs:{id:"go111module"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#go111module"}},[s._v("#")]),s._v(" GO111MODULE")]),s._v(" "),r("ul",[r("li",[s._v("auto：只要项目包含了 go.mod 文件的话启用 Go modules，目前在 Go1.11 至 Go1.14 中仍然是默认值；")]),s._v(" "),r("li",[s._v("on：启用 Go modules，推荐设置，将会是未来版本中的默认值；")]),s._v(" "),r("li",[s._v("off：禁用 Go modules，不推荐设置；")])]),s._v(" "),r("br"),s._v(" "),r("h3",{attrs:{id:"goproxy"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#goproxy"}},[s._v("#")]),s._v(" GOPROXY")]),s._v(" "),r("ul",[r("li",[r("p",[s._v("这个环境变量主要是用于设置 Go 模块代理，其作用是用于使 Go 在后续拉取模块版本时能够脱离传统的 VCS 方式，直接通过镜像站点来快速拉取;")])]),s._v(" "),r("li",[r("p",[s._v("GOPROXY 的默认值是: "),r("strong",[s._v("https://proxy.golang.org,direct")]),s._v("，但是在国内是无法访问"),r("strong",[s._v("proxy.golang.org")]),s._v("的，所以这里可以设置为国内的代理：")])])]),s._v(" "),r("div",{staticClass:"language-go line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-go"}},[r("code",[s._v("$ "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" env "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("w GOPROXY"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("goproxy"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cn"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("direct\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("br"),s._v(" "),r("h3",{attrs:{id:"gosumdb"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#gosumdb"}},[s._v("#")]),s._v(" GOSUMDB")]),s._v(" "),r("ul",[r("li",[r("p",[s._v("它的值是一个 Go checksum database，用于在拉取模块版本时（无论是从源站拉取还是通过 Go module proxy 拉取）保证拉取到的模块版本数据未经过篡改，若发现不一致，也就是可能存在篡改，将会立即中止。")])]),s._v(" "),r("li",[r("p",[s._v("GOSUMDB 的默认值为："),r("strong",[s._v("sum.golang.org")]),s._v("，在国内也是无法访问的，但是 GOSUMDB 可以被GOPROXY所代理；")])])]),s._v(" "),r("br"),s._v(" "),r("h3",{attrs:{id:"gonoproxy-gonosumdb-goprivate"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#gonoproxy-gonosumdb-goprivate"}},[s._v("#")]),s._v(" GONOPROXY/GONOSUMDB/GOPRIVATE")]),s._v(" "),r("ul",[r("li",[r("p",[s._v("这三个环境变量都是用在当前项目依赖了私有模块，例如像是你公司的私有 git 仓库，又或是 github 中的私有库，都是属于私有模块，都是要进行设置的，否则会拉取失败；")])]),s._v(" "),r("li",[r("p",[s._v("GOPRIVATE的值将作为 GONOPROXY 和 GONOSUMDB 的默认值，所以可以直接使用GOPRIVATE；例如：")])])]),s._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[s._v('$ go env -w GOPRIVATE="git.example.com,github.com/eddycjy/mquote"\n')])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("ul",[r("li",[s._v("设置后，前缀为git.example.com和github.com/eddycjy/mquote 的模块都会被认为是私有模块，不会参与代理和校验；")])]),s._v(" "),r("br"),s._v(" "),r("h2",{attrs:{id:"go-modules版本选择"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#go-modules版本选择"}},[s._v("#")]),s._v(" go modules版本选择")]),s._v(" "),r("h3",{attrs:{id:"语义化版本控制"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#语义化版本控制"}},[s._v("#")]),s._v(" 语义化版本控制")]),s._v(" "),r("p",[r("img",{attrs:{src:a(491),alt:""}})]),s._v(" "),r("p",[s._v("其版本格式为 “主版本号.次版本号.修订号”，版本号的递增规则如下：")]),s._v(" "),r("ol",[r("li",[s._v("主版本号：引入不兼容的 API 修改。")]),s._v(" "),r("li",[s._v("次版本号：向下兼容的功能性新增。")]),s._v(" "),r("li",[s._v("修订号：向下兼容的问题修正。")])]),s._v(" "),r("h3",{attrs:{id:"导入兼容性规则"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#导入兼容性规则"}},[s._v("#")]),s._v(" 导入兼容性规则")]),s._v(" "),r("ul",[r("li",[r("p",[s._v("Go modules在主版本号为 v0 和 v1 的情况下省略了版本号，并且保证向下兼容；")])]),s._v(" "),r("li",[r("p",[s._v("而在主版本号为v2及以上则需要明确指定出主版本号，表示其引入不兼容的修改；")])]),s._v(" "),r("li",[r("p",[s._v("tag与模块导入路径的大致对应关系如下：")])])]),s._v(" "),r("table",[r("thead",[r("tr",[r("th",{staticStyle:{"text-align":"left"}},[s._v("tag")]),s._v(" "),r("th",{staticStyle:{"text-align":"left"}},[s._v("模块导入路径")])])]),s._v(" "),r("tbody",[r("tr",[r("td",{staticStyle:{"text-align":"left"}},[s._v("v0.0.0")]),s._v(" "),r("td",{staticStyle:{"text-align":"left"}},[s._v("github.com/eddycjy/mquote")])]),s._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"left"}},[s._v("v1.0.0")]),s._v(" "),r("td",{staticStyle:{"text-align":"left"}},[s._v("github.com/eddycjy/mquote")])]),s._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"left"}},[s._v("v2.0.0")]),s._v(" "),r("td",{staticStyle:{"text-align":"left"}},[s._v("github.com/eddycjy/mquote/v2")])]),s._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"left"}},[s._v("v3.0.0")]),s._v(" "),r("td",{staticStyle:{"text-align":"left"}},[s._v("github.com/eddycjy/mquote/v3")])])])]),s._v(" "),r("br"),s._v(" "),r("h3",{attrs:{id:"最小版本选择"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#最小版本选择"}},[s._v("#")]),s._v(" 最小版本选择")]),s._v(" "),r("ul",[r("li",[s._v("'最小版本选择'这个命名获取有点让人产生歧义，我们可以大致理解为选择'最新非最大'的版本的算法；")]),s._v(" "),r("li",[s._v("它定义了如下版本选择的算法：")])]),s._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[s._v("To construct the build list for a given target: start the list with the target itself, and then append each requirement's own build list. If a module appears in the list multiple times, keep only the newest version.\n\nTo upgrade all modules to their latest versions: construct the build list, but read each requirement as if it requested the latest module version.\n\nTo upgrade one module to a specific newer version: construct the non-upgraded build list and then append the new module's build list. If a module appears in the list multiple times, keep only the newest version.\n\nTo downgrade one module to a specific older version: rewind the required version of each top-level requirement until that requirement's build list no longer refers to newer versions of the downgraded module.\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br")])]),r("p",[r("img",{attrs:{src:a(492),alt:""}})]),s._v(" "),r("br"),s._v(" "),r("h2",{attrs:{id:"案例分析"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#案例分析"}},[s._v("#")]),s._v(" 案例分析")]),s._v(" "),r("h3",{attrs:{id:"case-1"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#case-1"}},[s._v("#")]),s._v(" case 1")]),s._v(" "),r("ul",[r("li",[s._v("执行"),r("strong",[s._v("go mod download")]),s._v("没有报错；")]),s._v(" "),r("li",[s._v("执行"),r("strong",[s._v("go mod tidy -v")]),s._v("命令会出现如下错误：")])]),s._v(" "),r("div",{staticClass:"language-go line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-go"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" finding module "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("security"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("plugins"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("aes\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" found github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("security"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("plugins"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("aes in github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis v1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.3")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" finding module "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("middleware"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ratelimiter\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" finding module "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("restful"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("api\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" finding module "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("pkg"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("profile\ngit"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("garena"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("shopee"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bg"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("logistics"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("b2c"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbs"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fbs"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("agent"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("awb imports\n        git"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("garena"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("shopee"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bg"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("logistics"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("chassis imports\n        github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("middleware"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ratelimiter"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" module github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis@latest found "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("v1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.3")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" but does not contain "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("middleware"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ratelimiter\ngit"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("garena"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("shopee"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bg"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("logistics"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("b2c"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbs"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fbs"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("apps"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("async_task"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("schema imports\n        git"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("garena"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("shopee"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bg"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("logistics"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("protocol"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("restful imports\n        github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("pkg"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("profile"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" module github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis@latest found "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("v1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.3")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" but does not contain "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("pkg"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("profile\ngit"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("garena"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("shopee"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bg"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("logistics"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("b2c"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbs"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fbs"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("apps"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("async_task"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("schema imports\n        git"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("garena"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("shopee"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bg"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("logistics"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("protocol"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("restful imports\n        github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("restful"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("api"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" module github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis@latest found "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("v1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.3")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" but does not contain "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("restful"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("api\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br")])]),r("h4",{attrs:{id:"初步分析"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#初步分析"}},[s._v("#")]),s._v(" 初步分析")]),s._v(" "),r("ul",[r("li",[r("p",[s._v("从上面错误信息可以得知，主要是"),r("code",[s._v("github.com/go-chassis/go-chassis")]),s._v("库中的"),r("strong",[s._v("middleware/ratelimiter")]),s._v("和"),r("strong",[s._v("server/restful/api")]),s._v("包找不到；")])]),s._v(" "),r("li",[r("p",[s._v("第一反应是先看一下项目中依赖的go-chassis库是什么版本，执行"),r("strong",[s._v("go mod graph")]),s._v("命令，这里将依赖关系绘制成如下图形：")])])]),s._v(" "),r("p",[r("img",{attrs:{src:a(493),alt:""}})]),s._v(" "),r("ul",[r("li",[s._v("从图中可以看到，项目中依赖了两个版本的go-chassis库，一个是项目直接依赖，另一个是由其它库引用了；")]),s._v(" "),r("li",[s._v("根据"),r("strong",[s._v("语义化版本")]),s._v("的比较规则，这里最终选择的版本是"),r("strong",[s._v("v1.8.3")]),s._v("；")]),s._v(" "),r("li",[s._v("可以通过执行"),r("strong",[s._v("go list -m github.com/go-chassis/go-chassis")]),s._v("命令来验证结果，如下命令输出所示，最终go-chassis版本为v1.8,3；")])]),s._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[s._v(">> go list -m github.com/go-chassis/go-chassis**\ngithub.com/go-chassis/go-chassis v1.8.3\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("br"),s._v(" "),r("ul",[r("li",[s._v("现在结果很明显了，"),r("strong",[s._v("middleware/ratelimiter")]),s._v("和"),r("strong",[s._v("server/restful/api")]),s._v("这两个包只存在"),r("strong",[s._v("v0.0.0-20200604060606-ba2932cb3029")]),s._v("版本中，而在"),r("strong",[s._v("v1.8.3")]),s._v("版本中是不存在的；以下是github的截图，可以验证这一点；")])]),s._v(" "),r("p",[r("img",{attrs:{src:a(494),alt:""}})]),s._v(" "),r("p",[r("img",{attrs:{src:a(495),alt:""}})]),s._v(" "),r("br"),s._v(" "),r("ul",[r("li",[s._v("但是这里还是有以下几个疑问暂时无法解释：")])]),s._v(" "),r("ol",[r("li",[s._v("为什么"),r("strong",[s._v("v1.8.3")]),s._v("和"),r("strong",[s._v("v0.0.0-20200604060606-ba2932cb3029")]),s._v("这两个版本之间会存在不兼容的问题，v1.8.3应该是向下兼容的？")]),s._v(" "),r("li",[s._v("为什么项目中是怎么间接引用了go-chassis库的v1.8.3版本？")]),s._v(" "),r("li",[s._v("为什么downlaod命令没有报错，tidy命令报错了？")])]),s._v(" "),r("br"),s._v(" "),r("ul",[r("li",[s._v("接下来就是逐一寻找每个疑问的答案了；")])]),s._v(" "),r("br"),s._v(" "),r("h4",{attrs:{id:"疑问1-为什么会出现不兼容的问题？"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#疑问1-为什么会出现不兼容的问题？"}},[s._v("#")]),s._v(" 疑问1 为什么会出现不兼容的问题？")]),s._v(" "),r("ul",[r("li",[s._v("这个问题比较好解决，因为"),r("strong",[s._v("v0.0.0-20200604060606-ba2932cb3029")]),s._v("是个伪版本号，这里直接根据commitid: "),r("strong",[s._v("ba2932cb3029")]),s._v("来找到它的真实版本；")])]),s._v(" "),r("p",[r("img",{attrs:{src:a(496),alt:""}})]),s._v(" "),r("br"),s._v(" "),r("ul",[r("li",[s._v("从上图可以看出，"),r("strong",[s._v("ba2932cb3029")]),s._v("是v2.0.0-alpha.2之后提交的版本，主版本号和v1.8.3不一致，所以这里可以解释为什么会出现不兼容的问题；")]),s._v(" "),r("li",[s._v("正是因为这里用的是伪版本号，所以go modules误以为"),r("strong",[s._v("v1.8.3")]),s._v("版本是向下兼容的，所以最终选择较新的版本；")])]),s._v(" "),r("br"),s._v(" "),r("h4",{attrs:{id:"疑问2-v1-8-3版本是如何引入的？"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#疑问2-v1-8-3版本是如何引入的？"}},[s._v("#")]),s._v(" 疑问2  v1.8.3版本是如何引入的？")]),s._v(" "),r("ul",[r("li",[s._v("我们回头再看一下错误信息开头两行的描述：")])]),s._v(" "),r("div",{staticClass:"language-go line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-go"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" finding module "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("security"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("plugins"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("aes\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" found github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("security"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("plugins"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("aes in github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis v1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.3")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("ul",[r("li",[s._v("第一行表示：tidy命令正在获取"),r("strong",[s._v("github.com/go-chassis/go-chassis/security/plugins/aes")]),s._v("包文件；")]),s._v(" "),r("li",[s._v("第二行表示： 在v1.8.3版本中找到了这个包；")])]),s._v(" "),r("br"),s._v(" "),r("ul",[r("li",[s._v("到这里就会想，为啥不是在"),r("strong",[s._v("v0.0.0-20200604060606-ba2932cb3029")]),s._v("版本中找呢，难道这个版本找不到吗？通过在github上查找对应源码，可以发现aes包不存在；而在v1.8.3版本中是存在的；")])]),s._v(" "),r("p",[r("img",{attrs:{src:a(497),alt:""}})]),s._v(" "),r("p",[r("img",{attrs:{src:a(498),alt:""}})]),s._v(" "),r("br"),s._v(" "),r("ul",[r("li",[s._v("那么到这里就可以解释v1.8.3是怎么引入进来的；")]),s._v(" "),r("li",[s._v("但是又引入了新的疑问："),r("strong",[s._v("github.com/go-chassis/go-chassis/security/plugins/aes")]),s._v("包是怎么引入进来的；")]),s._v(" "),r("li",[s._v("即使是执行"),r("strong",[s._v("go mod why github.com/go-chassis/go-chassis/security/plugins/aes")]),s._v("命令也是出现类似的错误，无法从中得到有效的信息；")])]),s._v(" "),r("div",{staticClass:"language-go line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-go"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" mod why github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("security"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("plugins"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("aes\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" finding module "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("middleware"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ratelimiter\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" finding module "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("pkg"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("profile\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" finding module "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("restful"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("api\ngit"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("garena"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("shopee"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bg"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("logistics"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("b2c"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbs"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fbs"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("agent"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("awb imports\n        git"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("garena"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("shopee"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bg"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("logistics"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("chassis imports\n        github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("middleware"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ratelimiter"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" module github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis@latest found "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("v1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.3")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" but does not contain "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("middleware"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ratelimiter\ngit"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("garena"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("shopee"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bg"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("logistics"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("b2c"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbs"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fbs"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("apps"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("async_task"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("schema imports\n        git"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("garena"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("shopee"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bg"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("logistics"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("protocol"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("restful imports\n        github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("pkg"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("profile"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" module github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis@latest found "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("v1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.3")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" but does not contain "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("pkg"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("profile\ngit"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("garena"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("shopee"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bg"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("logistics"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("b2c"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbs"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fbs"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("apps"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("async_task"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("schema imports\n        git"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("garena"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("shopee"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bg"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("logistics"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("protocol"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("restful imports\n        github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("restful"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("api"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" module github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis@latest found "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("v1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.3")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" but does not contain "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("restful"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("api\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br")])]),r("br"),s._v(" "),r("ul",[r("li",[s._v("再仔细分析错误信息，可以看出，最终都是因为"),r("strong",[s._v("v1.8.3")]),s._v("和"),r("strong",[s._v("v0.0.0-20200604060606-ba2932cb3029")]),s._v("这两个版本不兼容导致命令无法执行下去，从而无法获取更多的信息，所以这里可以先用"),r("strong",[s._v("replace")]),s._v("命令来规避这个兼容问题，强制使用"),r("strong",[s._v("v0.0.0-20200604060606-ba2932cb3029")]),s._v("版本；")])]),s._v(" "),r("div",{staticClass:"language-go line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-go"}},[r("code",[s._v("replace github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis v0"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("20200604060606")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ba2932cb3029\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("br"),s._v(" "),r("ul",[r("li",[s._v("再次执行"),r("strong",[s._v("go mod tidy")]),s._v("命令，这时出现了新的错误信息：")])]),s._v(" "),r("div",{staticClass:"language-go line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-go"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" mod tidy "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("v                                                  \n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" finding module "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("security"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("plugins"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("aes\ngit"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("garena"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("shopee"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bg"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("logistics"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("b2c"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbs"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fbs"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("agent"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("awb imports\n        git"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("garena"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("shopee"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bg"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("logistics"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("chassis imports\n        github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis imports\n        github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("archaius"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("source"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("remote"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("kie imports\n        github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("archaius"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("pkg"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("kieclient imports\n        github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("foundation"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("httpclient tested by\n        github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("foundation"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("httpclient"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("test imports\n        github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("security"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("plugins"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("aes"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" module github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis@latest found "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("v1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.3")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" replaced by github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis@v0"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("20200604060606")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ba2932cb3029"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" but does not contain "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("security"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("plugins"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("aes\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br")])]),r("br"),s._v(" "),r("ul",[r("li",[s._v("到这里终于找到了罪魁祸首，从第9行可以看出，是"),r("strong",[s._v("github.com/go-chassis/foundation")]),s._v("库将"),r("strong",[s._v("security/plugins/aes")]),s._v("包引入进来的；")]),s._v(" "),r("li",[s._v("然后这里的错误前面也提到过了，"),r("strong",[s._v("security/plugins/aes")]),s._v("这个包在"),r("strong",[s._v("v0.0.0-20200604060606-ba2932cb3029")]),s._v("版本是不存在的，而我们这里强制使用了"),r("strong",[s._v("v0.0.0-20200604060606-ba2932cb3029")]),s._v("版本，所以肯定会报错；")])]),s._v(" "),r("br"),s._v(" "),r("ul",[r("li",[s._v("到这里已经可以完全解答疑问2的问题了")])]),s._v(" "),r("br"),s._v(" "),r("h4",{attrs:{id:"疑问3-为什么download命令不报错？"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#疑问3-为什么download命令不报错？"}},[s._v("#")]),s._v(" 疑问3 为什么download命令不报错？")]),s._v(" "),r("ul",[r("li",[s._v("目前的线索就只剩下"),r("strong",[s._v("foundation")]),s._v("库了，所以现在只能先看一下foundation库是怎么引入"),r("strong",[s._v("security/plugins/aes")]),s._v("包的，看是否能从中获取新的信息；")])]),s._v(" "),r("br"),s._v(" "),r("ul",[r("li",[s._v("首先找到"),r("strong",[s._v("foundation")]),s._v("库当前所使用的版本，如下所示；")])]),s._v(" "),r("div",{staticClass:"language-go line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-go"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" list "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("m github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("foundation                               \ngithub"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("foundation v0"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.20191113114104")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("b05871e9ec4\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("br"),s._v(" "),r("ul",[r("li",[s._v("接着在github上找到引用"),r("strong",[s._v("security/plugins/aes")]),s._v("包的地方，如下所示：")])]),s._v(" "),r("p",[r("img",{attrs:{src:a(499),alt:""}})]),s._v(" "),r("br"),s._v(" "),r("ul",[r("li",[s._v("可以看到是从一个单测文件上引入进来的；")]),s._v(" "),r("li",[s._v("我的第一反应是单元测试文件在go build的时候是会忽略掉的；根据这个特性，这里大胆猜测了一下，download命令同样是会忽略掉单元测试文件，而tidy命令不会；如果这个推断成立，就可以解答疑问3的问题了；")]),s._v(" "),r("li",[s._v("最终在官网上找到这样的描述可以证明猜测是对的，链接: "),r("a",{attrs:{href:"https://golang.org/cmd/go/#hdr-Maintaining_module_requirements",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://golang.org/cmd/go/#hdr-Maintaining_module_requirements"),r("OutboundLink")],1)])]),s._v(" "),r("div",{staticClass:"language-go line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-go"}},[r("code",[s._v("Any "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" command can determine that a module requirement is missing and must be added"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" even \nwhen considering only a single "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" from the module"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" \n\nOn the other hand"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" determining that a module requirement is no longer necessary and can be \ndeleted requires a full view of all packages in the module"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" across all possible build configurations "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("architectures"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" operating systems"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" build tags"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" and so on"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" \n\nThe "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'go mod tidy'")]),s._v(" command builds that view and then adds any missing module requirements and removes unnecessary ones"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br")])]),r("br"),s._v(" "),r("h4",{attrs:{id:"解决"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#解决"}},[s._v("#")]),s._v(" 解决")]),s._v(" "),r("ul",[r("li",[s._v("解决完以上问题之后，我们就能得出最终的依赖关系图，如下所示：")])]),s._v(" "),r("p",[r("img",{attrs:{src:a(500),alt:""}})]),s._v(" "),r("br"),s._v(" "),r("ul",[r("li",[s._v("从图中可以看出，报错的根本原因是产生了钻石依赖；")]),s._v(" "),r("li",[s._v("而出现钻石依赖的原因是由"),r("strong",[s._v("v0.0.0-20200604060606-ba2932cb3029")]),s._v("版本造成的，因为它使用的是伪版本号，从而导致go modules在版本选择上误以为v1.8.3版本和它是向下兼容的，所以选择了v1.8.3版本；")]),s._v(" "),r("li",[s._v("但实际上这两个版本是存在兼容性问题的，所以最终不管选择哪个版本都会出现某个包在另外一个版本找不到的错误；")]),s._v(" "),r("li",[s._v("那么要解决这个问题就是要替换这个"),r("strong",[s._v("v0.0.0-20200604060606-ba2932cb3029")]),s._v("版本，但是由于这个其实是一个v2版本，而要升级到v2版本是需要很多开发测试的工作来保证正确性和兼容性；所以目前是暂时无法升级；")])]),s._v(" "),r("br"),s._v(" "),r("ul",[r("li",[s._v("那么只能从foundation库入手了，因为这个错误是从一个单元测试文件引入的，所以可以再找一个foundation库的版本，而该版本的单元测试是不会再引入go-chassis的依赖；最后再用"),r("strong",[s._v("replace命令")]),s._v("强制使用该版本；")])]),s._v(" "),r("div",{staticClass:"language-go line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-go"}},[r("code",[s._v("replace github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("foundation "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" github"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chassis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("foundation v0"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.20200825060850")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("b16bf420f7b3\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("br"),s._v(" "),r("h2",{attrs:{id:"小结"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[s._v("#")]),s._v(" 小结")]),s._v(" "),r("ul",[r("li",[s._v("其实大部分go modules依赖的问题最终都可以用"),r("strong",[s._v("语义化版本控制")]),s._v("和"),r("strong",[s._v("最小版本选择")]),s._v("这两个规则来解释；所以只要了解这两个规则的含义，剩下的就是去找项目中到底是哪个包破坏了这两个规则；")]),s._v(" "),r("li",[s._v("分析问题可以多使用"),r("strong",[s._v("go list")]),s._v("和"),r("strong",[s._v("go mod graph")]),s._v("命令，能够帮助梳理出所有包之间的依赖关系；")])]),s._v(" "),r("br"),s._v(" "),r("h2",{attrs:{id:"一些go-modules的使用建议"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#一些go-modules的使用建议"}},[s._v("#")]),s._v(" 一些go modules的使用建议")]),s._v(" "),r("ol",[r("li",[s._v("不建议使用伪版本号，除非这个库从来没有打tag，或者还没迁移到modules；")]),s._v(" "),r("li",[s._v("需要遵循go modules包管理的兼容性规则，v0和v1版本需要保证向下兼容；大于v1的版本号，需要显式的在路径末尾添加主版本号；")]),s._v(" "),r("li",[s._v("尽量不要使用预发版本，因为不能保证兼容性；")]),s._v(" "),r("li",[s._v("尽量在提交代码前执行一次go mod tidy命令，保证go.mod文件的正确性和干净；")])]),s._v(" "),r("br"),s._v(" "),r("br"),s._v(" "),r("h2",{attrs:{id:"参考文章"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[s._v("#")]),s._v(" 参考文章")]),s._v(" "),r("p",[r("a",{attrs:{href:"https://mp.weixin.qq.com/s/nd8ic1Qk812ZqmHKSFITUQ",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://mp.weixin.qq.com/s/nd8ic1Qk812ZqmHKSFITUQ"),r("OutboundLink")],1)]),s._v(" "),r("p",[r("a",{attrs:{href:"https://github.com/golang/go/wiki/Modules",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/golang/go/wiki/Modules"),r("OutboundLink")],1)]),s._v(" "),r("p",[r("a",{attrs:{href:"https://blog.golang.org/using-go-modules",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://blog.golang.org/using-go-modules"),r("OutboundLink")],1)]),s._v(" "),r("p",[r("a",{attrs:{href:"https://research.swtch.com/vgo-mvs",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://research.swtch.com/vgo-mvs"),r("OutboundLink")],1)]),s._v(" "),r("p",[r("a",{attrs:{href:"https://research.swtch.com/vgo-import",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://research.swtch.com/vgo-import"),r("OutboundLink")],1)]),s._v(" "),r("p",[r("a",{attrs:{href:"https://golang.org/cmd/go/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://golang.org/cmd/go/"),r("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);